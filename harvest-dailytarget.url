javascript:(function(){var t=37.5,e=5;function i(t){var e=1.5;var i=[1.75,1.75,1.5,.5,.33,.25,.25,.25];if(t>12)return 0;var a=0;i.forEach((function(i,n){var r=e*n;if(t>r){a+=Math.min(e,t-r)*i}}));return a}function a(t){if(t>=9.87)return 0;var e=t/2;var a=t-i(e);while(Math.abs(a)>.01){e=e*(a>0?1.5:.5);a=t-i(e)}return e}$(".js-timesheet-view").first().prepend('<div style="background:#f8f8f8;border:1px solid #e0e0e0;padding:0.5em;width:fit-content;margin:0 auto 1em auto;text-align:right"><b style="font-size:150%;margin-right:1em">Targets</b>'+' W:<input title="Weekly hours" type="number" id="__w_tgt" value="'+t+'" min="0" max="99" step="1">'+' D/W:<input title="Days per week" type="number" id="__w_l" value="'+e+'" min="1" max="7" step="1">'+' D:<input title="Daily hours" type="number" id="__d_tgt" min="0" max="24" step="0.01">'+' <b style="font-size:150%;margin-left:1em">ETA: <span id="__eta"></span></b>'+'<br>(<i>#min: <span id="__meta"></span></i>)</div>');var n=$("#__w_tgt"),r=$("#__w_l"),u=$("#__d_tgt"),s=$("#__eta"),m=$("#__meta");var d=function(){var t=Number(u.val()),e=Number($(".is-today .pds-text-sm").text()),n=Math.max(0,t-e),r=new Date((new Date).getTime()+n*36e5);s.html(n.toFixed(2)+"h until "+r.getHours()+":"+(r.getMinutes()<10?"0":"")+r.getMinutes());var d=0,o=0;$("table#day-view-entries tr.day-view-entry").each((function(){var t=$(this).find("div.entry-details div.notes").text(),e=Number($(this).find("td.entry-time").text());/#min/.test(t)?d+=e:o+=e}));var v=Math.max(0,a(t-o)-d),l=new Date((new Date).getTime()+v*36e5);m.html(v.toFixed(2)+"h until "+l.getHours()+":"+(l.getMinutes()<10?"0":"")+l.getMinutes()+" "+Math.round((i(d)/d+Number.EPSILON)*100)/100+"x so far")};setInterval(d,2e3);u.on("input change",d);var o=function(){var t=Number(n.val())-Number($("#day-view-week-nav-total .test-week-total").text())+Number($(".is-today .pds-text-sm").text()),e=new Date,i=1+Number(r.val())-(e.getDay()==0?7:e.getDay());u.val(Number(t/i).toFixed(2));d()};o();n.on("input change",o);r.on("input change",o)})()
